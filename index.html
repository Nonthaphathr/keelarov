<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô E-Sports - ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏∏‡∏°‡∏ó‡∏≠‡∏á‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body { font-family: 'Kanit', sans-serif; background: #1a1a1a; color: white; }
        .card { background: #2d2d2d; border: 1px solid #ffd700; box-shadow: 0 0 15px rgba(255, 215, 0, 0.2); }
        .btn-gold { background: linear-gradient(45deg, #FFD700, #FFA500); border: none; font-weight: bold; color: #000; }
        .logo { width: 100px; display: block; margin: 0 auto 20px; }
        a { text-decoration: none; }
    </style>
</head>
<body class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card p-4">
                    <img src="https://nonthaphathr.github.io/uploadimg/logoschool.png" class="logo">
                    <h3 class="text-center mb-4">‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô E-Sports (ROV)</h3>
                    <h5 class="text-center text-warning">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏µ‡∏¨‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏∏‡∏°‡∏ó‡∏≠‡∏á‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤</h5>
                    <p class="text-center text-muted small">‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢ ‡∏Ñ‡∏£‡∏π‡∏ô‡∏ô‡∏ó‡∏û‡∏±‡∏ó‡∏ò‡πå ‡∏´‡∏¥‡∏£‡∏±‡∏ç‡πÄ‡∏£‡∏∑‡∏≠‡∏á</p>
                    
                    <form id="regForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</label>
                                <input type="date" class="form-control" id="matchDate" required>
                            </div>
                            <div class="col-md-6">
                                <label>‡∏Ñ‡∏ì‡∏∞‡∏™‡∏µ</label>
                                <select class="form-select" id="teamColor" required>
                                    <option value="" selected disabled>-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ --</option>
                                    <option value="yellow">‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á</option>
                                    <option value="blue">‡∏™‡∏µ‡∏ü‡πâ‡∏≤</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô</label>
                            <select class="form-select" id="level" required>
                                <option value="‡∏°.‡∏ï‡πâ‡∏ô">‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏≠‡∏ô‡∏ï‡πâ‡∏ô</option>
                                <option value="‡∏°.‡∏õ‡∏•‡∏≤‡∏¢">‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏≠‡∏ô‡∏õ‡∏•‡∏≤‡∏¢</option>
                            </select>
                        </div>
                        
                        <hr class="border-warning">
                        <h5>‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô (‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏¥‡∏á 5 ‡∏Ñ‡∏ô)</h5>
                        <div id="playersContainer">
                            </div>

                        <h5 class="mt-3">‡∏ï‡∏±‡∏ß‡∏™‡∏≥‡∏£‡∏≠‡∏á <button type="button" class="btn btn-sm btn-outline-warning" onclick="addSub()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°</button></h5>
                        <div id="subsContainer"></div>

                        <button type="submit" class="btn btn-gold w-100 mt-4">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£</button>
                    </form>

                    <div class="mt-4 text-center border-top border-secondary pt-3">
                        <p class="text-muted small">‡πÄ‡∏°‡∏ô‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà/‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£</p>
                        <div class="d-flex justify-content-center gap-2">
                            <a href="match.html" class="btn btn-outline-danger btn-sm">
                                üéÆ ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (Match)
                            </a>
                            <a href="report.html" class="btn btn-outline-info btn-sm">
                                üìÑ ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏• (Report)
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAAW6t1cnskXOF6mbQTI9jwHQ2FFurkVqo",
            authDomain: "kradumthong-esports.firebaseapp.com",
            databaseURL: "https://kradumthong-esports-default-rtdb.firebaseio.com",
            projectId: "kradumthong-esports",
            storageBucket: "kradumthong-esports.firebasestorage.app",
            messagingSenderId: "297783930970",
            appId: "1:297783930970:web:8addc3c392708a07c52863"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ 5 ‡∏Ñ‡∏ô
        const pContainer = document.getElementById('playersContainer');
        for(let i=1; i<=5; i++){
            pContainer.innerHTML += `<input type="text" class="form-control mb-2" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà ${i}" id="p${i}" required>`;
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏™‡∏≥‡∏£‡∏≠‡∏á (Global scope)
        window.addSub = () => {
            const div = document.createElement('input');
            div.className = "form-control mb-2";
            div.placeholder = "‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏• ‡∏ï‡∏±‡∏ß‡∏™‡∏≥‡∏£‡∏≠‡∏á";
            div.name = "subPlayer";
            document.getElementById('subsContainer').appendChild(div);
        }

        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        document.getElementById('regForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const color = document.getElementById('teamColor').value;
            const players = [];
            for(let i=1; i<=5; i++) players.push(document.getElementById(`p${i}`).value);
            
            const subs = [];
            document.getElementsByName('subPlayer').forEach(el => { if(el.value) subs.push(el.value) });

            set(ref(db, 'teams/' + color), {
                date: document.getElementById('matchDate').value,
                level: document.getElementById('level').value,
                players: players,
                subs: subs,
                timestamp: Date.now()
            }).then(() => {
                Swal.fire({
                    title: '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
                    text: '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏° ' + (color=='yellow'?'‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á':'‡∏™‡∏µ‡∏ü‡πâ‡∏≤') + ' ‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢',
                    icon: 'success',
                    confirmButtonColor: '#FFD700'
                });
            }).catch((error) => {
                Swal.fire('Error', error.message, 'error');
            });
        });
    </script>
</body>
</html>